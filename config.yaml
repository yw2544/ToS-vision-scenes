# ToS-vision-scenes Configuration
# =================================
# Visual scene generation pipeline for Theory of Space
# GitHub: https://github.com/williamzhangNU/Theory-of-Space

# Theory-of-Space Paths
# These paths assume this module is at Theory-of-Space/ToS-vision-scenes/
tos_paths:
  root: ".."                                    # Theory-of-Space repo root
  base: "../vagen/env/spatial/Base"             # Spatial environment base

# Model Import Settings
model_import:
  # Unity Editor path - required for building asset bundles
  # Recommended version: Unity 2020.3.48 (installed via Unity Hub)
  # Platform-specific paths:
  #   macOS: /Applications/Unity/Hub/Editor/2020.3.48f1/Unity.app/Contents/MacOS/Unity
  #   Windows: C:/Program Files/Unity/Hub/Editor/2020.3.48f1/Editor/Unity.exe
  #   Linux: /path/to/Unity/Editor/Unity
  unity_path: ""

# Room Layout Generation Settings
# ================================
# Standard configurations:
#   2-room: room_num=2, topology=0, total_objects=8,  fix_object_n=[4,4]
#   3-room: room_num=3, topology=1, total_objects=12, fix_object_n=[4,4,4]
#   4-room: room_num=4, topology=2, total_objects=16, fix_object_n=[4,4,4,4]
#
# Topology defines room connections:
#   0 = linear (main room connects to 1 adjacent room)
#   1 = T-shape (main room connects to 2 adjacent rooms)
#   2 = cross (main room connects to 3 adjacent rooms)
#   3 = loop/ring structure

room_layout:
  room_size_tuple: [6, 6]           # Size of each room (width, height)
  room_num: 3                       # Number of rooms (2, 3, or 4)
  n_objects: 4                      # Objects per room (total = n_objects * room_num)
  topology: 1                       # See topology options above
  seed: 0                           # Random seed (overridden by batch settings)

# Object Generation Settings
object_generation:
  total_objects: 12                 # Total objects across all rooms
  fix_object_n: [4, 4, 4]           # Per-room object count (must match room_num)
  
# Scene Generation Settings
scene_generation:
  # TDW Settings
  port: 1075                  # TDW communication port
  
  # Object Settings
  overall_scale: 0.6        # Overall scale multiplier for objects
  
  # Model Settings (New JSON-based system)
  builtin_models_path: "./models/builtin_models.json"  # Path to built-in models JSON
  custom_models_path: "./models/custom_models.json"  # Path to custom models JSON
  door_record_path: "./models/door_record.json"  # Path to door record JSON

# Batch Generation Settings
batch:
  num_runs: 1              # Number of remaining runs (100-44=56)
  seed_start: 0              # Starting seed for run01 (test the failing case)
  seed_increment: 1      # Increment between seeds
  run_offset: 0           # Start from run01

# Output Settings
output:
  base_dir: "./tos_dataset"        # Base output directory
  save_mask: true             # Save generated mask files
  save_layout_debug: true     # Save layout generation debug info
  save_scene_metadata: true   # Save scene generation metadata
  save_topdown_map: true      # Save topdown_map into meta_data.json (transform TDW coordinates to mask indices)

# Text-based Validity Settings (for TextBase alignment)
text_based_validity:
  # Pre-render validation using VAGEN EvaluationManager
  eval_tasks:                # Task configurations for validation
    - task_type: "dir"           # Direction task
      num: 1                     # Number of this task type
    - task_type: "pov"           # Point of view task
      num: 1
    - task_type: "bwd_pov_text"  # Backward POV
      num: 1
    - task_type: "fwd_fov"       # Forward field of view task
      num: 1
    - task_type: "bwd_nav_text"  # Backward navigation
      num: 1
    - task_type: "e2a"           # Egocentric to allocentric task
      num: 1
    - task_type: "rot"           # Rotation task
      num: 1
    - task_type: "fwd_loc"       # Forward localization task
      num: 1
    - task_type: "bwd_loc_text"  # Backward localization 
      num: 1

